# Test generated by RoostGPT for test roostPostmanTest using AI Type Azure Open AI and AI Model roost-gpt4-32k

# RoostTestHash=474b7881ac

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 20
  plugins:
    expect: {}
  payload:
    path: "login_get_others.csv"
    fields: ["username", "password"]
    skipHeader: true

scenarios:
  - name: "Testing fail cases for /user/login API"
    flow:
      # Validation failure: Invalid URL case
      - think: 5
      - log: "Validation failure test: Invalid URL"
      - get:
          url: "/invalid/login?username={{ username }}&password={{ password }}"
          headers:
            Authorization: "Invalid {{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 400
            - header: ["X-Rate-Limit", "X-Expires-After"]
            - hasProperty: ["description"]
        # Authorization failure case
      - think: 5
      - log: "Authorization failure test: Not providing the auth token"
      - get:
          url: "/user/login?username={{ username }}&password={{ password }}"
          headers:
            Authorization: "Invalid"
          expect:
            - statusCode: 401
            - header: ["X-Rate-Limit", "X-Expires-After"]
            - hasProperty: ["error"]
        # Parameter missing failure case
      - think: 5
      - log: "Parameter missing failure test: username is missing"
      - get:
          url: "/user/login?username=&password={{ password }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 400
            - header: ["X-Rate-Limit", "X-Expires-After"]
            - hasProperty: ["description"]
      - think: 5
      - log: "Parameter missing failure test: password is missing"
      - get:
          url: "/user/login?username={{ username }}&password="
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 400
            - header: ["X-Rate-Limit", "X-Expires-After"]
            - hasProperty: ["description"]
