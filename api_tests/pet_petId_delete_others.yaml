# Test generated by RoostGPT for test roostPostmanTest using AI Type Azure Open AI and AI Model roost-gpt4-32k

# RoostTestHash=fbd3e66b3b

config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "pet_petId_delete_others.csv"
    fields: ["petId"]
    skipHeader: true 

scenarios:
  - name: "Delete Pet Failure Scenario"
    flow:
      - think: 10
      - post:
         url: "/pet/invalidPetId"
         headers:
            api_key: "someRandomInvalidKey"
            Authorization: "{{ $processEnvironment.INVALID_AUTH_TOKEN }}"
         expect:
            - statusCode: 400
            - hasHeaders: ["content-type"]
            - equals: 
               - headers["content-type"]: "application/xml"
            - hasProperty: ['message']
         log: "Testing flow with invalid pet id and expecting status code 400." 

      - think: 10
      - post:
         url: "/pet/{{ petId }}"
         headers: 
            api_key: "someRandomInvalidKey"
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
         expect:
            - statusCode: 400
            - hasHeaders: ["content-type"]
            - equals: 
               - headers["content-type"]: "application/xml"
            - hasProperty: ['message']
         log: "Testing flow with invalid api_key and expecting status code 400."

      - think: 10
      - post:
         url: "/pet/{{ petId }}"
         headers:
            api_key: "{{ $processEnvironment.API_KEY }}"
            Authorization: "{{ $processEnvironment.INVALID_AUTH_TOKEN }}"
         expect:
            - statusCode: 400
            - hasHeaders: ["content-type"]
            - equals: 
               - headers["content-type"]: "application/xml"
            - hasProperty: ['message']
         log: "Testing flow with invalid Authorization token and expecting status code 400."
