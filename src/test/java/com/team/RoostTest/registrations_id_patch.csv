import csv
import uuid
import random
from faker import Faker
from random import randrange
from datetime import datetime, timedelta

fake = Faker()

# List of statuses
statuses = [200, 201, 202, 204, 206, 300, 301, 302, 303, 304, 307, 400, 401, 403, 404, 405, 406, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 500, 501, 502, 503, 504, 505]

def generate_end_date(n_days): 
    start_date = datetime.now()
    end_date = start_date + timedelta(days = random.randint(1,n_days))
    return end_date.date()

def generate_suspended_date(n_days): 
    start_date = datetime.now()
    end_date = start_date + timedelta(days = random.randint(-n_days,n_days))
    return end_date.date()

def generate_csv_file(file_name, header, n_rows):
    with open(file_name, mode='w', newline='') as file:
        writer = csv.writer(file, delimiter=',')
        writer.writerow(header)
        for _ in range(n_rows):
            row = [
                str(uuid.uuid4()),
                fake.word(),
                bool(random.getrandbits(1)),
                generate_suspended_date(100),
                generate_end_date(500),
                random.choice(statuses)
            ]
            writer.writerow(row)

headers = ["id","reference","revoked","suspendedUntil","endDate", "statusCode"]

generate_csv_file('dummy_data.csv', headers, 10)
